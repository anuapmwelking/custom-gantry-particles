{% extends '@nucleus/partials/particle.html.twig' %}

{% block particle %}
<div class="{{ particle.css.class|e }}">
    {#<div align="center">#}
    {# {% if particle.title %}<h2 class="g-title">{{ particle.title|raw }}</h2>{% endif %}#}
        
    {#    <div class="slideshow-container">#}
  
        {#{% for item in particle.items %}#}
    {#    <div class="mySlides fade">#}
    {#      <div>{{item.title}}</div>#}
    {#      <img src="{{ url(item.imageSelection) }}" class="slider"  alt="image" style="width:100%">#}
    {#      <div class="text">{{item.content}}</div>#}
    {#    </div>#}

      {#{% endfor %}#}
    {#  <div style="text-align:center">#}
        {#{% for item in particle.items %}#}
    {#      <span class="dot"></span> #}
     {#{% endfor %}#}
    {# </div>#}
    {#    <div id="list"></div>#}
        
</div>
<div id="testing"><p>dummy text</p></div>
<div >{{particle.apiLink}}</div>
     <div class="apiLinkClass"
    data-link="{{ particle.apiLink }}"
>
 
</div>
{% endblock %}

{% block javascript_footer %}
    {% do gantry.load('jquery') %}
    {#<script src="{{ url('gantry-theme://js/sliderApi.js') }}">#}
    {#</script>#}
 <script>
    // document.getElementById('testing').addEventListener('DOMContentLoaded', ()=>{
    //     console.log(this.innerHTML);
    // });

    var userRating = document.querySelector('.apiLinkClass');
    var getLink = userRating.dataset.link;

    const xhr = new XMLHttpRequest();
    // console.log({{particle.apiLink}})
    xhr.open("GET", getLink);

    xhr.onload = function () {
      if (this.status === 200) {
        let obj = JSON.parse(this.responseText);
        console.log(obj);
        let list = document.getElementById("myInput");
        str = "";
     for (key in obj) {
      if (obj[key].id <= 5) {
        // console.log(document.getElementById("testing").innerTEXT)
        // str += `
        // <img src="${obj[key].url}" class="card-img-top" alt="..."> 
        // `;
            }
        // list = str;
        }
     };
    };
    xhr.send();
 </script>

{% endblock %}
